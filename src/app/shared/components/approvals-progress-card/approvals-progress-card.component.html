@if (!isLoading) {
  <div class="progress-card" (click)="onCardClick(); $event.stopPropagation()">
    <div class="flex justify-content-between align-items-center mb-2">
      <h2>{{ data?.Short_Description }}</h2>
      <p-menu
        #menu
        [model]="actions"
        popup="true"
        [appendTo]="'body'"
        [style]="{ 'font-size': '14px' }"
      ></p-menu>
      <i class="pi pi-ellipsis-v" (click)="menu.toggle($event); $event.stopPropagation()"></i>
    </div>
    <p class="description mb-2" [innerHTML]="data?.Long_Description"></p>
    <div class="flex justify-content-between align-items-center">
      <div class="flex align-items-center gap-3">
        <div class="status" >
          <i></i>
            {{ data.Building_Type_Name }}         
        </div>

         <div class="status">
          <i></i>
            {{ data.Building_Standard_Name }}         
        </div>

         <div class="status" >
          <i></i>
            {{ data.Statutory_Authority_Name }}         
        </div>
        <!-- priority: high, low or medium -->
        <!-- <div class="priority" [class]="data.Priority?.toLowerCase()">
          <i class="pi pi-flag-fill"></i>
          @if (data?.Priority) {
            {{ data.Priority }}
          } @else {
            --
          }
        </div> -->
        <!-- <div class="profile-pics">
            @for (img of data?.profileUrls; track $index) {
              <img width="32" height="32" loading="lazy" [src]="img" alt="" />
            }
          </div> -->
        <div class="assignee">
          <div>
            <span class="initials">
              {{ data?.Creator | shortName }}
            </span>
            {{ data?.Creator }}
          </div>
          @if (data?.Responsible && data?.Creator !== data?.Responsible) {
            >
            <div>
              <span class="initials orange">
                {{ data?.Responsible | shortName }}
              </span>
              {{ data?.Responsible }}
            </div>
          }
        </div>
      </div>
      <div class="flex align-items-center gap-3">
        <div class="badge progress-badge">
          <i class="pi pi-clock"></i>
          {{ data?.Progress_Percentage ? data?.Progress_Percentage : '--' }} %
        </div>
        <div class="badge date-badge">
          <i class="pi pi-calendar"></i>
          {{ data.Completion_Date }}
        </div>
        <div class="badge sub-task-badge">
          <i class="pi pi-sitemap"></i>
          {{ data?.Subtask_Count ? data?.Subtask_Count : '--' }}
        </div>
      </div>
    </div>
  </div>
}
@if (isLoading) {
  <div class="progress-card">
    <div class="flex justify-content-between align-items-center mb-2">
      <h2><p-skeleton width="150px"></p-skeleton></h2>
      <i class="pi pi-ellipsis-v"></i>
    </div>

    <p class="description mb-2">
      <p-skeleton width="100%" height="1.5rem"></p-skeleton>
    </p>

    <div class="flex justify-content-between align-items-center flex-wrap gap-2">
      <div class="flex align-items-center gap-3">
        <div class="status">
          <p-skeleton width="80px"></p-skeleton>
        </div>
        <div class="priority">
          <p-skeleton width="60px"></p-skeleton>
        </div>
        <div class="assignee">
          <p-skeleton width="120px"></p-skeleton>
        </div>
      </div>

      <div class="flex align-items-center gap-3">
        <div class="badge progress-badge">
          <i class="pi pi-clock"></i>
          <p-skeleton width="50px"></p-skeleton>
        </div>
        <div class="badge date-badge">
          <i class="pi pi-calendar"></i>
          <p-skeleton width="100px"></p-skeleton>
        </div>
        <div class="badge sub-task-badge">
          <i class="pi pi-sitemap"></i>
          <p-skeleton width="40px"></p-skeleton>
        </div>
      </div>
    </div>
  </div>
}
