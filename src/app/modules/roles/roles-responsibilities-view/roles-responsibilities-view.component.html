<!-- <p>roles-responsibilities-view works!</p> -->
@if (hasError) {
  <app-no-data-found
    [title]="'No roles added'"
    [buttonLabel]="'Add Roles'"
    [buttonIcon]="'pi pi-plus'"
    (onClick)="goToAdd()"
  ></app-no-data-found>
} @else {
  <!-- Breadcrum section -->
  <app-breadcrumbs [breadcrumbItems]="breadcrumbs"></app-breadcrumbs>

  <!-- manage -->
  <div class="roles-containers">
    <div class="flex" style="justify-content: space-between; align-items: center">
      <div>
        <h2 class="manager">{{ title }}</h2>
      </div>
      <div class="" style="display: flex; gap: 8px">
        @if (hasAccess.canDelete) {
          <button class="btn-outline btn-delete" (click)="handleDelete()">Delete</button>
        }
        @if (hasAccess.canWrite) {
          <button class="btn-outline btn-edit" (click)="handleEdit()">Edit</button>
        }
      </div>
    </div>
  </div>
  <div class="roles-container">
    <div class="grid">
      @for (role of rolesArr; track $index) {
        <div class="col-6">
          <div class="card">
            <div class="card-header">
              <h3>
                {{ role.subModuleName.split('_').join(' ') | titlecase }}
                @if (role.subModuleName !== role.moduleName) {
                  <span class="roles ml-1">{{
                    role.moduleName.split('_').join(' ') | titlecase
                  }}</span>
                }
              </h3>
            </div>
            <div class="card-actions">
              @if (role.canRead) {
                <button class="action-btn">
                  <img
                    class="icon-img mr-2"
                    src="\assets\roles-responsibilities\read.svg"
                    alt=""
                  />Read
                </button>
              }
              @if (role.canWrite) {
                <button class="action-btn">
                  <img
                    class="icon-img mr-2"
                    src="\assets\roles-responsibilities\edit.svg"
                    alt=""
                  />Write
                </button>
              }
              @if (role.canDelete) {
                <button class="action-btn">
                  <img
                    class="icon-img mr-2"
                    src="\assets\roles-responsibilities\delete.svg"
                    alt=""
                  />Delete
                </button>
              }
              @if (!(role.canRead || role.canWrite || role.canDelete)) {
                <button class="action-btn add-btn">No Role</button>
              }
            </div>
          </div>
        </div>
      } @empty {
        @if (!isLoading) {
          <div class="col-12">
            <app-no-data-found
              [title]="'No roles configured'"
              [buttonLabel]="'Edit Roles'"
              [buttonIcon]="'pi pi-pencil'"
              (onClick)="handleEdit()"
              class="no-permission"
            ></app-no-data-found>
          </div>
        }
      }
    </div>
  </div>
}

<!-- data save dialog -->

<app-confirm-dialog
  [showDialog]="dataVisible"
  [title]="
    disableDelete
      ? 'You can\'t delete, This role is already assigned to ' +
        (noOfUsers === 1 ? noOfUsers + ' user' : noOfUsers + ' users')
      : 'Are You sure you want to delete this Role?'
  "
  [buttonLabel]="'Yes, Delete'"
  [isButtonLoading]="isDeletingRole"
  [type]="'warning'"
  (onConfirm)="saveData()"
  (onDialogHide)="dataVisible = false"
  [icon]="'trash'"
  [isDisabled]="disableDelete"
></app-confirm-dialog>
